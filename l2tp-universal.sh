  "${BLUE}[*] Создание пользователей (${USERS_COUNT})...${NC}"
  create_users "$USERS_COUNT"
  echo -e "${BLUE}[*] Настройка iptables SNAT...${NC}"
  setup_firewall_snat "$IFACE"
  echo -e "${BLUE}[*] Перезапуск сервисов...${NC}"
  restart_services
  echo -e "${BLUE}[*] Сбор и вывод данных клиентов...${NC}"
  collect_client_info
  echo "\nИтоговый файл с данными: $OUT_FILE"
}

# ============ README NOTICE ============
# Данный скрипт поддерживает явный список исходящих IP через переменную OUTGOING_IPS,
# например:
#   OUTGOING_IPS="1.2.3.4 5.6.7.8" bash l2tp-universal.sh
# При задании OUTGOING_IPS используется только этот список (никакие служебные/локальные/авто-IP не затрагиваются).
# При авто-режиме скрипт исключает служебные IP (10.180.1.1, 10.180.2.1, 10.180.5.1) и приватные диапазоны
# (10.0.0.0/8, 192.168.0.0/16, 172.16.0.0/12, 127.0.0.0/8, 169.254.0.0/16, 100.64.0.0/10).
# Каждому пользователю в выводе назначается уникальный OUTGOING_IP по порядку из списка.
# Если IP меньше, чем пользователей — выводится предупреждение, часть пользователей будет использовать первый IP.
# Если IP больше — используются только нужные по количеству пользователей.
# ======================================

main "$@"
